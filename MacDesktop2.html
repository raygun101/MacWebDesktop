<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>OSX Desktop Simulation with Menu and SVG Icons</title>
  <style>
    /* Reset & Base Styles */
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      overflow: hidden;
      font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
    }
    
    /* Menu Bar (top of screen) */
    #menu-bar {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 24px;
      background: #333;
      color: #fff;
      display: flex;
      align-items: center;
      padding: 0 10px;
      z-index: 2000;
    }
    #menu-bar .menu-item {
      margin-right: 15px;
      position: relative;
      cursor: pointer;
    }
    #menu-bar .menu-item svg {
      vertical-align: middle;
    }
    /* Dropdown Menu for Menu Bar Items */
    .dropdown {
      display: none;
      position: absolute;
      top: 24px;
      left: 0;
      background: #fff;
      color: #000;
      border: 1px solid #ccc;
      min-width: 150px;
      z-index: 2000;
    }
    .dropdown ul {
      list-style: none;
      margin: 0;
      padding: 5px 0;
    }
    .dropdown ul li {
      padding: 5px 15px;
      cursor: pointer;
    }
    .dropdown ul li:hover {
      background: #eee;
    }
    /* Show dropdown on hover */
    #menu-bar .menu-item:hover .dropdown {
      display: block;
    }
    
    /* Desktop (with a gap for the menu bar) */
    #desktop {
      width: 100%;
      height: 100%;
      background: url('osx_background.jpg') no-repeat center center fixed;
      background-size: cover;
      position: relative;
      padding-top: 24px; /* leave room for the menu bar */
    }
    
    /* Desktop Icons */
    .icon {
      width: 60px;
      text-align: center;
      margin: 10px;
      position: absolute;
      cursor: pointer;
    }
    .icon svg {
      width: 48px;
      height: 48px;
    }
    .icon span {
      display: block;
      font-size: 12px;
      color: white;
      text-shadow: 1px 1px 2px black;
    }
    
    /* Dock styling */
    #dock {
      position: absolute;
      bottom: 10px;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      background: rgba(255, 255, 255, 0.2);
      border-radius: 10px;
      padding: 5px 10px;
      z-index: 1500;
    }
    .dock-item {
      width: 60px;
      height: 60px;
      margin: 0 5px;
      transition: transform 0.2s;
      cursor: pointer;
    }
    .dock-item:hover {
      transform: scale(1.2);
    }
    
    /* Window styling */
    .window {
      position: absolute;
      width: 500px;
      height: 350px;
      background: #f0f0f0;
      border: 1px solid #ccc;
      border-radius: 5px;
      box-shadow: 0 0 10px rgba(0,0,0,0.5);
      overflow: hidden;
      z-index: 1000;
    }
    .window .title-bar {
      background: linear-gradient(to bottom, #e1e1e1, #c1c1c1);
      padding: 5px;
      cursor: move;
      border-top-left-radius: 5px;
      border-top-right-radius: 5px;
      position: relative;
      user-select: none;
    }
    .window .title-bar span.title {
      font-weight: bold;
    }
    .window .title-bar .buttons {
      position: absolute;
      right: 5px;
      top: 5px;
    }
    .window .title-bar .button {
      display: inline-block;
      width: 12px;
      height: 12px;
      margin-left: 5px;
      border-radius: 50%;
    }
    .window .title-bar .button.close { background: #ff5f57; }
    .window .title-bar .button.minimize { background: #ffbd2e; }
    .window .title-bar .button.maximize { background: #28c940; }
    .window .content {
      padding: 0;
      height: calc(100% - 30px);
      overflow: auto;
    }
    .resizer {
      width: 10px;
      height: 10px;
      position: absolute;
      right: 0;
      bottom: 0;
      cursor: se-resize;
      background: transparent;
    }
    
    /* Finder Application Styling */
    .finder-window {
      display: flex;
      flex-direction: column;
      height: 100%;
      background: #fff;
    }
    .finder-toolbar {
      background: #e0e0e0;
      padding: 5px 10px;
      border-bottom: 1px solid #ccc;
    }
    .finder-content {
      flex: 1;
      padding: 10px;
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      overflow-y: auto;
    }
    .finder-item {
      width: 80px;
      text-align: center;
      cursor: pointer;
    }
    .finder-item svg {
      width: 64px;
      height: 64px;
    }
    .finder-item span {
      font-size: 12px;
      color: #333;
    }
    
    /* Drag and Drop Styles */
    .draggable {
      transition: transform 0.1s;
    }
    .dropzone {
      position: relative;
    }
    
    /* Custom Context Menu */
    #contextMenu {
      position: absolute;
      display: none;
      background: #fff;
      border: 1px solid #ccc;
      box-shadow: 2px 2px 5px rgba(0,0,0,0.3);
      z-index: 1000;
    }
    #contextMenu ul {
      list-style: none;
      margin: 0;
      padding: 5px;
    }
    #contextMenu ul li {
      padding: 5px 10px;
      cursor: pointer;
    }
    #contextMenu ul li:hover {
      background: #eee;
    }
  </style>
</head>
<body>
  <!-- Menu Bar -->
  <div id="menu-bar">
    <!-- Apple Menu -->
    <div class="menu-item">
      <!-- Apple Icon (SVG) -->
      <svg width="16" height="16" viewBox="0 0 32 32">
        <circle cx="16" cy="16" r="14" fill="#fff"></circle>
      </svg>
      <div class="dropdown">
        <ul>
          <li onclick="alert('About This Mac')">About This Mac</li>
          <li onclick="alert('System Preferences')">System Preferences</li>
          <li onclick="alert('Log Out')">Log Out</li>
        </ul>
      </div>
    </div>
    <!-- Other Menu Items -->
    <div class="menu-item" onclick="openFinder()">Finder</div>
    <div class="menu-item">
      File
      <div class="dropdown">
        <ul>
          <li onclick="alert('New Finder Window')">New Finder Window</li>
          <li onclick="alert('New Folder')">New Folder</li>
          <li onclick="alert('Get Info')">Get Info</li>
        </ul>
      </div>
    </div>
    <div class="menu-item">
      Edit
      <div class="dropdown">
        <ul>
          <li onclick="alert('Cut')">Cut</li>
          <li onclick="alert('Copy')">Copy</li>
          <li onclick="alert('Paste')">Paste</li>
        </ul>
      </div>
    </div>
    <div class="menu-item">
      View
      <div class="dropdown">
        <ul>
          <li onclick="alert('As Icons')">As Icons</li>
          <li onclick="alert('As List')">As List</li>
          <li onclick="alert('As Columns')">As Columns</li>
        </ul>
      </div>
    </div>
    <div class="menu-item">
      Help
      <div class="dropdown">
        <ul>
          <li onclick="alert('Search')">Search</li>
        </ul>
      </div>
    </div>
  </div>
  
  <!-- Desktop -->
  <div id="desktop" class="dropzone">
    <!-- Desktop Icons -->
    <div class="icon draggable" id="finderIcon" style="top: 40px; left: 20px;" ondblclick="openFinder()">
      <!-- Finder SVG Icon -->
      <svg viewBox="0 0 48 48">
        <rect x="4" y="4" width="40" height="40" rx="6" fill="#007AFF"></rect>
      </svg>
      <span>Finder</span>
    </div>
    <div class="icon draggable" id="trashIcon" style="top: 40px; left: 100px;" ondblclick="openTrash()">
      <!-- Trash SVG Icon -->
      <svg viewBox="0 0 48 48">
        <rect x="14" y="16" width="20" height="24" fill="#FF3B30"></rect>
        <rect x="18" y="12" width="12" height="4" fill="#FF3B30"></rect>
      </svg>
      <span>Trash</span>
    </div>
    
    <!-- Dock -->
    <div id="dock">
      <div class="dock-item" ondblclick="openFinder()">
        <!-- Finder SVG Icon for Dock -->
        <svg viewBox="0 0 48 48">
          <rect x="4" y="4" width="40" height="40" rx="6" fill="#007AFF"></rect>
        </svg>
      </div>
      <div class="dock-item" ondblclick="openSettings()">
        <!-- Settings SVG Icon for Dock -->
        <svg viewBox="0 0 48 48">
          <circle cx="24" cy="24" r="10" fill="#4CD964"></circle>
          <circle cx="24" cy="24" r="18" stroke="#4CD964" stroke-width="4" fill="none"></circle>
        </svg>
      </div>
    </div>
    
    <!-- Container for Dynamic Windows -->
    <div id="windows-container"></div>
  </div>
  
  <!-- Custom Context Menu -->
  <div id="contextMenu">
    <ul>
      <li onclick="refreshDesktop()">Refresh</li>
      <li onclick="openSettings()">Settings</li>
    </ul>
  </div>
  
  <script>
    /*****************************************************************
     * Central Drag & Drop Manager (for Finder items, desktop icons, etc.)
     *****************************************************************/
    const DragDropManager = {
      draggingItem: null,
      ghost: null,
      offsetX: 0,
      offsetY: 0,
      init: function() {
        document.addEventListener('mousedown', this.onMouseDown.bind(this));
        document.addEventListener('mousemove', this.onMouseMove.bind(this));
        document.addEventListener('mouseup', this.onMouseUp.bind(this));
      },
      onMouseDown: function(e) {
        // Only start drag if clicked on an element marked as draggable
        const target = e.target.closest('.draggable');
        if (target && !e.target.closest('.title-bar')) { // avoid conflict with window dragging
          this.draggingItem = target;
          const rect = target.getBoundingClientRect();
          this.offsetX = e.clientX - rect.left;
          this.offsetY = e.clientY - rect.top;
          // Create a ghost element that follows the cursor
          this.ghost = target.cloneNode(true);
          this.ghost.style.position = 'fixed';
          this.ghost.style.pointerEvents = 'none';
          this.ghost.style.opacity = '0.7';
          this.ghost.style.zIndex = '1000';
          this.ghost.style.left = rect.left + 'px';
          this.ghost.style.top = rect.top + 'px';
          document.body.appendChild(this.ghost);
        }
      },
      onMouseMove: function(e) {
        if (this.draggingItem && this.ghost) {
          this.ghost.style.left = (e.clientX - this.offsetX) + 'px';
          this.ghost.style.top = (e.clientY - this.offsetY) + 'px';
        }
      },
      onMouseUp: function(e) {
        if (this.draggingItem && this.ghost) {
          // Check for a valid drop target (element with "dropzone" class)
          let dropTarget = document.elementFromPoint(e.clientX, e.clientY);
          dropTarget = dropTarget ? dropTarget.closest('.dropzone') : null;
          if (dropTarget) {
            dropTarget.appendChild(this.draggingItem);
          }
          document.body.removeChild(this.ghost);
          this.draggingItem = null;
          this.ghost = null;
        }
      }
    };
    DragDropManager.init();
    
    /*****************************************************************
     * Window Management (moving/resizing application windows)
     *****************************************************************/
    function makeDraggable(el, handle) {
      handle = handle || el;
      handle.addEventListener('mousedown', function(e) {
        // Prevent drag-drop interference
        e.stopPropagation();
        let startX = e.clientX;
        let startY = e.clientY;
        const rect = el.getBoundingClientRect();
        const offsetX = startX - rect.left;
        const offsetY = startY - rect.top;
    
        function onMouseMove(e) {
          el.style.left = (e.clientX - offsetX) + 'px';
          el.style.top = (e.clientY - offsetY) + 'px';
        }
    
        function onMouseUp() {
          document.removeEventListener('mousemove', onMouseMove);
          document.removeEventListener('mouseup', onMouseUp);
        }
    
        document.addEventListener('mousemove', onMouseMove);
        document.addEventListener('mouseup', onMouseUp);
      });
    }
    
    function makeResizable(win, resizer) {
      resizer.addEventListener('mousedown', function(e) {
        e.stopPropagation();
        const startX = e.clientX;
        const startY = e.clientY;
        const startWidth = parseInt(document.defaultView.getComputedStyle(win).width, 10);
        const startHeight = parseInt(document.defaultView.getComputedStyle(win).height, 10);
    
        function doDrag(e) {
          win.style.width = (startWidth + e.clientX - startX) + 'px';
          win.style.height = (startHeight + e.clientY - startY) + 'px';
        }
    
        function stopDrag() {
          document.documentElement.removeEventListener('mousemove', doDrag, false);
          document.documentElement.removeEventListener('mouseup', stopDrag, false);
        }
    
        document.documentElement.addEventListener('mousemove', doDrag, false);
        document.documentElement.addEventListener('mouseup', stopDrag, false);
      });
    }
    
    function createWindow(title, content) {
      const win = document.createElement('div');
      win.className = 'window';
      win.style.top = '100px';
      win.style.left = '100px';
    
      // Title Bar
      const titleBar = document.createElement('div');
      titleBar.className = 'title-bar';
      titleBar.innerHTML = '<span class="title">' + title + '</span>';
      
      // Window Buttons
      const buttons = document.createElement('div');
      buttons.className = 'buttons';
      buttons.innerHTML = 
        '<span class="button close" onclick="closeWindow(this)"></span>' +
        '<span class="button minimize"></span>' +
        '<span class="button maximize"></span>';
      titleBar.appendChild(buttons);
      win.appendChild(titleBar);
    
      // Content Area
      const contentDiv = document.createElement('div');
      contentDiv.className = 'content';
      if (typeof content === 'string') {
        contentDiv.innerHTML = content;
      } else {
        contentDiv.appendChild(content);
      }
      win.appendChild(contentDiv);
    
      // Resizer Handle
      const resizer = document.createElement('div');
      resizer.className = 'resizer';
      win.appendChild(resizer);
    
      document.getElementById('windows-container').appendChild(win);
      makeDraggable(win, titleBar);
      makeResizable(win, resizer);
      return win;
    }
    
    function closeWindow(btn) {
      const win = btn.closest('.window');
      win.parentNode.removeChild(win);
    }
    
    /*****************************************************************
     * Finder Application Implementation
     *****************************************************************/
    function openFinder() {
      const finderWindow = document.createElement('div');
      finderWindow.className = 'finder-window';
      
      // Finder Toolbar
      const toolbar = document.createElement('div');
      toolbar.className = 'finder-toolbar';
      toolbar.innerHTML = '<strong>Finder</strong>';
      finderWindow.appendChild(toolbar);
      
      // Finder Content Area (with dropzone)
      const contentArea = document.createElement('div');
      contentArea.className = 'finder-content dropzone';
      
      // Create sample file items (using SVG)
      for (let i = 1; i <= 8; i++) {
        const fileItem = document.createElement('div');
        fileItem.className = 'finder-item draggable';
        fileItem.innerHTML = `
          <svg viewBox="0 0 64 64">
            <rect x="8" y="8" width="48" height="48" rx="4" fill="#34C759"></rect>
            <polyline points="22,16 42,16 42,28" stroke="white" stroke-width="2" fill="none"></polyline>
          </svg>
          <br><span>File ${i}</span>`;
        fileItem.ondblclick = function() {
          alert('Opening File ' + i);
        };
        contentArea.appendChild(fileItem);
      }
      
      // Create a folder item (using SVG)
      const folderItem = document.createElement('div');
      folderItem.className = 'finder-item draggable';
      folderItem.innerHTML = `
        <svg viewBox="0 0 64 64">
          <path d="M8 20 H56 V48 H8 Z" fill="#FFCC00"></path>
          <path d="M8 20 L16 12 H48 L56 20 Z" fill="#FFCC00"></path>
        </svg>
        <br><span>Folder</span>`;
      folderItem.ondblclick = function() {
        alert('Opening Folder');
      };
      contentArea.appendChild(folderItem);
      
      finderWindow.appendChild(contentArea);
      createWindow('Finder', finderWindow);
    }
    
    /*****************************************************************
     * Other Applications (Trash, Settings)
     *****************************************************************/
    function openTrash() {
      createWindow('Trash', '<p>The Trash is empty.</p>');
    }
    
    function openSettings() {
      createWindow('Settings', '<p>Settings window content (simulate OSX settings).</p>');
    }
    
    function refreshDesktop() {
      alert('Desktop refreshed!');
    }
    
    /*****************************************************************
     * Custom Context Menu on Desktop
     *****************************************************************/
    const desktop = document.getElementById('desktop');
    const contextMenu = document.getElementById('contextMenu');
    
    desktop.addEventListener('contextmenu', function(e) {
      e.preventDefault();
      contextMenu.style.display = 'block';
      contextMenu.style.left = e.pageX + 'px';
      contextMenu.style.top = e.pageY + 'px';
    });
    
    document.addEventListener('click', function(e) {
      contextMenu.style.display = 'none';
    });
  </script>
</body>
</html>
